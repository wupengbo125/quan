# quan
quantities

# 聚宽A股量化交易策略使用说明

## 策略概述

本项目包含多个版本的聚宽A股量化交易策略，最新的修复版策略已经解决了不交易的问题。

## 策略特点

1. **多因子选股**：结合市值、估值、质量和成长性等多个因子进行综合评分
2. **行业分散**：避免过度集中在单一行业，降低行业风险
3. **趋势过滤**：根据市场趋势判断决定是否入场
4. **风险控制**：设置最大回撤限制和仓位控制
5. **动态调整**：每日开盘时调仓，收盘前进行风险检查

## 文件说明

- `debug_strategy.py`：调试版策略文件，包含详细的日志输出，用于诊断交易问题
- `final_strategy.py`：最终版策略文件，包含所有交易逻辑
- `fixed_strategy.py`：修复版策略文件，解决了不交易的问题
- `config.json`：回测配置文件，设置回测参数

## 使用方法

1. 登录聚宽官网 (https://www.joinquant.com)
2. 进入策略研究平台
3. 创建新策略，将`fixed_strategy.py`的内容复制到策略编辑器中
4. 保存并运行回测
5. 根据回测结果调整参数

## 策略参数说明

- `g.stock_num`：持仓股票数量，默认为5只（调试用）
- `g.max_industry_ratio`：单个行业最大占比，默认为30%
- `g.max_drawdown_limit`：最大回撤限制，默认为15%
- `g.position_limit`：最大仓位限制，默认为90%

## 因子说明

1. **市值因子**（权重25%）：偏好小市值股票
2. **价值因子**（PB权重15%，PE权重10%）：偏好低估值股票
3. **质量因子**（ROE权重20%，毛利率权重10%）：偏好高质量公司
4. **成长因子**（营收增长率权重10%）：偏好高成长性公司
5. **盈利因子**（EPS权重10%）：偏好盈利能力强的公司

## 风险控制机制

1. **市场趋势过滤**：当沪深300指数的20日均线呈下降趋势时清仓
2. **行业分散**：单个行业持仓不超过30%
3. **最大回撤控制**：当账户回撤超过15%时自动减仓
4. **次新股过滤**：过滤上市不足60天的股票

## 修复说明

修复版策略解决了以下问题：
1. 修正了下单逻辑，确保订单能正确执行
2. 调整了交易时间，避免在数据未准备好时交易
3. 修复了价格获取函数的调用方式
4. 增加了更详细的错误处理和日志输出

## 注意事项

1. 策略基于历史数据回测，未来表现可能有所不同
2. 请根据个人风险偏好调整参数
3. 建议先进行小资金实盘测试，再逐步加大资金量
4. 定期检查和更新策略参数以适应市场变化